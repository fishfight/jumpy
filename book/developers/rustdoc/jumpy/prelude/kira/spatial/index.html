<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Positions audio in 3D space."><title>jumpy::prelude::kira::spatial - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../../../static.files/rustdoc-c5d6553a23f1e5a6.css"><meta name="rustdoc-vars" data-root-path="../../../../" data-static-root-path="../../../../static.files/" data-current-crate="jumpy" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0 (eeb90cda1 2024-09-04)" data-channel="1.81.0" data-search-js="search-d234aafac6c221dd.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../../static.files/main-d2fab2bf619172d3.js"></script><noscript><link rel="stylesheet" href="../../../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../../../static.files/favicon-2c020d218678b618.svg"><script src='https://unpkg.com/panzoom@9.4.0/dist/panzoom.min.js'></script>
<script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10.2.2/dist/mermaid.esm.min.mjs"
    mermaid.initialize({
        startOnLoad: false,
        securityLevel: 'loose',
        theme: 'dark',
        themeVariables: {
            fontSize: '16px',
            lineColor: '#F8B229',
            clusterBkg: '#0000',
            edgeLabelBackground: '#1A1A1A'
        }
    });
    mermaid.run({
        querySelector: '.mermaid',
        postRenderCallback: id => {
            let el = document.getElementById(id);
            const pz = panzoom(el, {
                smoothScroll: false,
                zoomDoubleClickSpeed: 1,
                beforeWheel: function (e) {
                    // allow wheel-zoom only if ctrl is down. Otherwise - ignore
                    var shouldIgnore = !e.ctrlKey;
                    return shouldIgnore;
                }
            })

            const plusDiv = document.createElement('div');
            plusDiv.style = "width: 25px; height: 25px; position: absolute; right: 0.8em; bottom: 0.8em; border: 2px solid #BBB; text-align: center; padding: auto; font-size: 18px; background-color: #222; cursor: pointer"
            plusDiv.innerText = "+"
            plusDiv.onclick = () => {
                pz.smoothZoom(0, 0, 1.2)
            }
            el.parentNode.appendChild(plusDiv);

            const minusDiv = document.createElement('div');
            minusDiv.style = "width: 25px; height: 25px; position: absolute; right: 2.4em; bottom: 0.8em; border: 2px solid #BBB; text-align: center; padding: auto; font-size: 18px; background-color: #222; cursor: pointer"
            minusDiv.innerText = "-"
            minusDiv.onclick = () => {
                pz.smoothZoom(0, 0, 0.8)
            }
            el.parentNode.appendChild(minusDiv);
        }
    })

    // Callback for use in mermaid diagrams that will open a relative doc link when clicking.
    //
    // Example doc link for `arg` would be: jumpy/session/struct.SessionManager.html
    window.docLink = (arg) => {
        let pathElems = new URL(window.location.href).pathname.split('/').filter(x => x != '');
        for (let i = pathElems.length - 1; i > -1; i--) {
            if (pathElems[i] != 'jumpy' && pathElems[i] != 'jumpy_core') {
                pathElems = pathElems.slice(0, i - 1);
                break;
            }
        }
        window.location.href = '/' + pathElems.join('/') + '/' + arg;
    }
</script>
<style>
    /*
        Hide the lock icons shown for private items. It isn't helpful
        in this context.
    */
    [title="Restricted Visibility"] {
        display: none;
    }

    .mermaid {
        overflow: hidden !important;
        border: 1px solid #BBB;
        border-radius: 1em;
        cursor: move;
        position: relative;
    }

    .dotted rect {
        stroke-dasharray: 5;
    }

    .code .nodeLabel {
        color: #2dbfb8 !important;
    }

    .code rect {
        transition: 0.2s;
        stroke: #2dbfb8 !important;
    }

    .code:hover rect {
        transform: scale(1.05)
    }
</style>

</head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../../../jumpy/index.html"><img src="https://avatars.githubusercontent.com/u/87333478?s=200&amp;v=4" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../../../jumpy/index.html"><img src="https://avatars.githubusercontent.com/u/87333478?s=200&amp;v=4" alt="logo"></a><h2><a href="../../../../jumpy/index.html">jumpy</a><span class="version">0.12.2</span></h2></div><h2 class="location"><a href="#">Module spatial</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#modules">Modules</a></li></ul></section><h2><a href="../index.html">In jumpy::prelude::kira</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../../../index.html">jumpy</a>::<wbr><a href="../../index.html">prelude</a>::<wbr><a href="../index.html">kira</a>::<wbr><a class="mod" href="#">spatial</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Positions audio in 3D space.</p>
<p>Oftentimes, it’s useful to give sounds a location in a 3D (or 2D) space
and play back those sounds from the perspective of a character’s ears
located somewhere else in that space. For example, as a player character
gets closer to a waterfall, you may want the sound of the waterfall to
get louder.</p>
<p>Kira’s spatial audio system currently supports:</p>
<ul>
<li><strong>Attenuation</strong>: changing the volume of sounds depending on the distance
from the listener</li>
<li><strong>Spatialization</strong>: changing the panning (left ear/right ear positioning)
of sounds depending on their angle from the listener</li>
</ul>
<p>There are three components to Kira’s spatial audio system:</p>
<ul>
<li><strong>Emitters</strong>, which produce sound from a point in space</li>
<li><strong>Listeners</strong>, which receive sound from the emitters from a point in space</li>
<li><strong>Spatial scenes</strong>, which hold listeners and emitters</li>
</ul>
<h2 id="geometric-parameters"><a class="doc-anchor" href="#geometric-parameters">§</a>Geometric parameters</h2>
<p>Some functions take parameters of type <code>mint::Vector3</code> and <code>mint::Quaternion</code>.
<a href="https://crates.io/crates/mint"><code>mint</code></a> is a library that defines common math
types for interoperability between math libraries. You can pass in types from any
library that supports conversion to <code>mint</code> types into Kira’s functions. The
following examples will use <code>glam</code> with the <code>mint</code> feature enabled.</p>
<h2 id="usage"><a class="doc-anchor" href="#usage">§</a>Usage</h2>
<p>To use spatial audio, first create a spatial scene using
<a href="../manager/struct.AudioManager.html#method.add_spatial_scene" title="method jumpy::prelude::kira::manager::AudioManager::add_spatial_scene"><code>AudioManager::add_spatial_scene</code></a>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>kira::{
	manager::{AudioManager, AudioManagerSettings, backend::DefaultBackend},
	spatial::scene::SpatialSceneSettings,
};

<span class="kw">let </span><span class="kw-2">mut </span>manager = AudioManager::&lt;DefaultBackend&gt;::new(AudioManagerSettings::default())<span class="question-mark">?</span>;
<span class="kw">let </span><span class="kw-2">mut </span>scene = manager.add_spatial_scene(SpatialSceneSettings::default())<span class="question-mark">?</span>;</code></pre></div>
<p>Then, create a listener using
<a href="scene/struct.SpatialSceneHandle.html#method.add_listener" title="method jumpy::prelude::kira::spatial::scene::SpatialSceneHandle::add_listener"><code>SpatialSceneHandle::add_listener</code></a>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>kira::{
	manager::{AudioManager, AudioManagerSettings, backend::DefaultBackend},
	spatial::{scene::SpatialSceneSettings, listener::ListenerSettings},
};
<span class="kw">use </span>glam::{Vec3, Quat};

<span class="kw">let </span><span class="kw-2">mut </span>manager = AudioManager::&lt;DefaultBackend&gt;::new(AudioManagerSettings::default())<span class="question-mark">?</span>;
<span class="kw">let </span><span class="kw-2">mut </span>scene = manager.add_spatial_scene(SpatialSceneSettings::default())<span class="question-mark">?</span>;
<span class="kw">let </span>listener = scene.add_listener(Vec3::ZERO, Quat::IDENTITY, ListenerSettings::default())<span class="question-mark">?</span>;</code></pre></div>
<p>Next, create an emitter using
<a href="scene/struct.SpatialSceneHandle.html#method.add_emitter" title="method jumpy::prelude::kira::spatial::scene::SpatialSceneHandle::add_emitter"><code>SpatialSceneHandle::add_emitter</code></a>:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>kira::{
	manager::{AudioManager, AudioManagerSettings, backend::DefaultBackend},
	spatial::{
		scene::SpatialSceneSettings,
		listener::ListenerSettings,
		emitter::EmitterSettings,
	},
};
<span class="kw">use </span>glam::{Vec3, Quat};

<span class="kw">let </span><span class="kw-2">mut </span>manager = AudioManager::&lt;DefaultBackend&gt;::new(AudioManagerSettings::default())<span class="question-mark">?</span>;
<span class="kw">let </span><span class="kw-2">mut </span>scene = manager.add_spatial_scene(SpatialSceneSettings::default())<span class="question-mark">?</span>;
<span class="kw">let </span>listener = scene.add_listener(Vec3::ZERO, Quat::IDENTITY, ListenerSettings::default())<span class="question-mark">?</span>;
<span class="kw">let </span>emitter = scene.add_emitter(Vec3::new(<span class="number">100.0</span>, <span class="number">100.0</span>, <span class="number">0.0</span>), EmitterSettings::default())<span class="question-mark">?</span>;</code></pre></div>
<p>If you run the program now, you won’t hear anything. That’s because there’s nothing
playing through the emitter. Let’s play a sound:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>kira::{
	manager::{AudioManager, AudioManagerSettings, backend::DefaultBackend},
	spatial::{
		scene::SpatialSceneSettings,
		listener::ListenerSettings,
		emitter::EmitterSettings,
	},
	sound::static_sound::{StaticSoundData, StaticSoundSettings},
};
<span class="kw">use </span>glam::{Vec3, Quat};

<span class="kw">let </span><span class="kw-2">mut </span>manager = AudioManager::&lt;DefaultBackend&gt;::new(AudioManagerSettings::default())<span class="question-mark">?</span>;
<span class="kw">let </span><span class="kw-2">mut </span>scene = manager.add_spatial_scene(SpatialSceneSettings::default())<span class="question-mark">?</span>;
<span class="kw">let </span>listener = scene.add_listener(Vec3::ZERO, Quat::IDENTITY, ListenerSettings::default())<span class="question-mark">?</span>;
<span class="kw">let </span>emitter = scene.add_emitter(Vec3::new(<span class="number">100.0</span>, <span class="number">100.0</span>, <span class="number">0.0</span>), EmitterSettings::default())<span class="question-mark">?</span>;
<span class="kw">let </span>sound = StaticSoundData::from_file(<span class="string">"sound.ogg"</span>)<span class="question-mark">?
	</span>.output_destination(<span class="kw-2">&amp;</span>emitter);
manager.play(sound)<span class="question-mark">?</span>;</code></pre></div>
<p>Now you can move the emitter or the listener using
<a href="emitter/struct.EmitterHandle.html#method.set_position" title="method jumpy::prelude::kira::spatial::emitter::EmitterHandle::set_position"><code>EmitterHandle::set_position</code></a>
or <a href="listener/struct.ListenerHandle.html#method.set_position" title="method jumpy::prelude::kira::spatial::listener::ListenerHandle::set_position"><code>ListenerHandle::set_position</code></a>,
respectively, and the volume and panning of sounds will update automatically.</p>
<h2 id="customizing-the-physical-characteristics-of-sounds"><a class="doc-anchor" href="#customizing-the-physical-characteristics-of-sounds">§</a>Customizing the physical characteristics of sounds</h2>
<p>Each emitter has separate controls for how the volume is affected by distance from the
listener and how panning is affected by angle. Attenuation and spatialization can be
disabled entirely. See <a href="emitter/struct.EmitterSettings.html" title="struct jumpy::prelude::kira::spatial::emitter::EmitterSettings"><code>EmitterSettings</code></a>
for more details.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="emitter/index.html" title="mod jumpy::prelude::kira::spatial::emitter">emitter</a></div><div class="desc docblock-short">Produces audio in a 3D space.</div></li><li><div class="item-name"><a class="mod" href="listener/index.html" title="mod jumpy::prelude::kira::spatial::listener">listener</a></div><div class="desc docblock-short">Receives audio in a 3D space.</div></li><li><div class="item-name"><a class="mod" href="scene/index.html" title="mod jumpy::prelude::kira::spatial::scene">scene</a></div><div class="desc docblock-short">A 3D space that audio travels through.</div></li></ul></section></div></main></body></html>
<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Maps raw inputs to game controls and exposes controls for respective player and their control source."><title>InputCollector in jumpy::prelude - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-46f98efaafac5295.ttf.woff2,FiraSans-Regular-018c141bf0843ffd.woff2,FiraSans-Medium-8f9a781e4970d388.woff2,SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2,SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-c5d6553a23f1e5a6.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="jumpy" data-themes="" data-resource-suffix="" data-rustdoc-version="1.81.0 (eeb90cda1 2024-09-04)" data-channel="1.81.0" data-search-js="search-d234aafac6c221dd.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../../static.files/storage-118b08c4c78b968e.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-d2fab2bf619172d3.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-df360f571f6edeae.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"><script src='https://unpkg.com/panzoom@9.4.0/dist/panzoom.min.js'></script>
<script type="module">
    import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@10.2.2/dist/mermaid.esm.min.mjs"
    mermaid.initialize({
        startOnLoad: false,
        securityLevel: 'loose',
        theme: 'dark',
        themeVariables: {
            fontSize: '16px',
            lineColor: '#F8B229',
            clusterBkg: '#0000',
            edgeLabelBackground: '#1A1A1A'
        }
    });
    mermaid.run({
        querySelector: '.mermaid',
        postRenderCallback: id => {
            let el = document.getElementById(id);
            const pz = panzoom(el, {
                smoothScroll: false,
                zoomDoubleClickSpeed: 1,
                beforeWheel: function (e) {
                    // allow wheel-zoom only if ctrl is down. Otherwise - ignore
                    var shouldIgnore = !e.ctrlKey;
                    return shouldIgnore;
                }
            })

            const plusDiv = document.createElement('div');
            plusDiv.style = "width: 25px; height: 25px; position: absolute; right: 0.8em; bottom: 0.8em; border: 2px solid #BBB; text-align: center; padding: auto; font-size: 18px; background-color: #222; cursor: pointer"
            plusDiv.innerText = "+"
            plusDiv.onclick = () => {
                pz.smoothZoom(0, 0, 1.2)
            }
            el.parentNode.appendChild(plusDiv);

            const minusDiv = document.createElement('div');
            minusDiv.style = "width: 25px; height: 25px; position: absolute; right: 2.4em; bottom: 0.8em; border: 2px solid #BBB; text-align: center; padding: auto; font-size: 18px; background-color: #222; cursor: pointer"
            minusDiv.innerText = "-"
            minusDiv.onclick = () => {
                pz.smoothZoom(0, 0, 0.8)
            }
            el.parentNode.appendChild(minusDiv);
        }
    })

    // Callback for use in mermaid diagrams that will open a relative doc link when clicking.
    //
    // Example doc link for `arg` would be: jumpy/session/struct.SessionManager.html
    window.docLink = (arg) => {
        let pathElems = new URL(window.location.href).pathname.split('/').filter(x => x != '');
        for (let i = pathElems.length - 1; i > -1; i--) {
            if (pathElems[i] != 'jumpy' && pathElems[i] != 'jumpy_core') {
                pathElems = pathElems.slice(0, i - 1);
                break;
            }
        }
        window.location.href = '/' + pathElems.join('/') + '/' + arg;
    }
</script>
<style>
    /*
        Hide the lock icons shown for private items. It isn't helpful
        in this context.
    */
    [title="Restricted Visibility"] {
        display: none;
    }

    .mermaid {
        overflow: hidden !important;
        border: 1px solid #BBB;
        border-radius: 1em;
        cursor: move;
        position: relative;
    }

    .dotted rect {
        stroke-dasharray: 5;
    }

    .code .nodeLabel {
        color: #2dbfb8 !important;
    }

    .code rect {
        transition: 0.2s;
        stroke: #2dbfb8 !important;
    }

    .code:hover rect {
        transform: scale(1.05)
    }
</style>

</head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button><a class="logo-container" href="../../jumpy/index.html"><img src="https://avatars.githubusercontent.com/u/87333478?s=200&amp;v=4" alt=""></a></nav><nav class="sidebar"><div class="sidebar-crate"><a class="logo-container" href="../../jumpy/index.html"><img src="https://avatars.githubusercontent.com/u/87333478?s=200&amp;v=4" alt="logo"></a><h2><a href="../../jumpy/index.html">jumpy</a><span class="version">0.12.2</span></h2></div><h2 class="location"><a href="#">InputCollector</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.advance_frame">advance_frame</a></li><li><a href="#tymethod.apply_inputs">apply_inputs</a></li><li><a href="#tymethod.get_control">get_control</a></li><li><a href="#tymethod.update_just_pressed">update_just_pressed</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In jumpy::prelude</a></h2></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><h1>Trait <a href="../index.html">jumpy</a>::<wbr><a href="index.html">prelude</a>::<wbr><a class="trait" href="#">InputCollector</a><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><span class="out-of-band"><button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub trait InputCollector&lt;'a, ControlMapping, ControlSource, Control&gt;: <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/1.81.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a><div class="where">where
    ControlMapping: <a class="trait" href="bones_schema/trait.HasSchema.html" title="trait jumpy::prelude::bones_schema::HasSchema">HasSchema</a>,</div>{
    // Required methods
    fn <a href="#tymethod.apply_inputs" class="fn">apply_inputs</a>(
        &amp;mut self,
        mapping: <a class="primitive" href="https://doc.rust-lang.org/1.81.0/std/primitive.reference.html">&amp;ControlMapping</a>,
        keyboard: &amp;<a class="struct" href="struct.KeyboardInputs.html" title="struct jumpy::prelude::KeyboardInputs">KeyboardInputs</a>,
        gamepad: &amp;<a class="struct" href="struct.GamepadInputs.html" title="struct jumpy::prelude::GamepadInputs">GamepadInputs</a>,
    );
<span class="item-spacer"></span>    fn <a href="#tymethod.advance_frame" class="fn">advance_frame</a>(&amp;mut self);
<span class="item-spacer"></span>    fn <a href="#tymethod.update_just_pressed" class="fn">update_just_pressed</a>(&amp;mut self);
<span class="item-spacer"></span>    fn <a href="#tymethod.get_control" class="fn">get_control</a>(
        &amp;self,
        player_idx: <a class="primitive" href="https://doc.rust-lang.org/1.81.0/std/primitive.usize.html">usize</a>,
        control_source: ControlSource,
    ) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.81.0/std/primitive.reference.html">&amp;Control</a>;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Maps raw inputs to game controls and exposes controls for respective player and their control source.</p>
<p><a href="trait.InputCollector.html#tymethod.apply_inputs" title="method jumpy::prelude::InputCollector::apply_inputs"><code>InputCollector::apply_inputs</code></a> maps raw input to game controls and updates them.</p>
<p><a href="trait.InputCollector.html#tymethod.update_just_pressed" title="method jumpy::prelude::InputCollector::update_just_pressed"><code>InputCollector::update_just_pressed</code></a> computes any changes in pressed buttons that may be stored on control.</p>
<p><a href="trait.InputCollector.html#tymethod.advance_frame" title="method jumpy::prelude::InputCollector::advance_frame"><code>InputCollector::advance_frame</code></a> is  used to mark that the input has been consumed, and update the prev frame inputs to current, to compute changes next frame.</p>
<p>Generic type param ControlMapping is HasSchema because it is expected to be a Resource retrievable on world.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">ยง</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.apply_inputs" class="method"><h4 class="code-header">fn <a href="#tymethod.apply_inputs" class="fn">apply_inputs</a>(
    &amp;mut self,
    mapping: <a class="primitive" href="https://doc.rust-lang.org/1.81.0/std/primitive.reference.html">&amp;ControlMapping</a>,
    keyboard: &amp;<a class="struct" href="struct.KeyboardInputs.html" title="struct jumpy::prelude::KeyboardInputs">KeyboardInputs</a>,
    gamepad: &amp;<a class="struct" href="struct.GamepadInputs.html" title="struct jumpy::prelude::GamepadInputs">GamepadInputs</a>,
)</h4></section></summary><div class="docblock"><p>Update the internal state with new inputs. This must be called every render frame with the
input events. This updates which buttons are pressed, but does not compute what buttons were โjust_pressedโ.
use <a href="trait.InputCollector.html#tymethod.update_just_pressed" title="method jumpy::prelude::InputCollector::update_just_pressed"><code>InputCollector::update_just_pressed</code></a> to do this.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.advance_frame" class="method"><h4 class="code-header">fn <a href="#tymethod.advance_frame" class="fn">advance_frame</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Indicate input for this frame has been consumed. An implementation of <a href="trait.InputCollector.html" title="trait jumpy::prelude::InputCollector"><code>InputCollector</code></a> that is
used with a fixed simulation step may track what keys are currently pressed, and what keys were โjust pressedโ,
(changing from previous state).</p>
<p>This saves current inputs as previous frameโs inputs, allowing for determining what is โjust pressedโ next frame.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.update_just_pressed" class="method"><h4 class="code-header">fn <a href="#tymethod.update_just_pressed" class="fn">update_just_pressed</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Update which buttons have been โjust pressedโ, when input has changed from last frame and current input state.</p>
<p>This does not modify previous frameโs input, to do this use <a href="trait.InputCollector.html#tymethod.advance_frame" title="method jumpy::prelude::InputCollector::advance_frame"><code>InputCollector::advance_frame</code></a>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.get_control" class="method"><h4 class="code-header">fn <a href="#tymethod.get_control" class="fn">get_control</a>(
    &amp;self,
    player_idx: <a class="primitive" href="https://doc.rust-lang.org/1.81.0/std/primitive.usize.html">usize</a>,
    control_source: ControlSource,
) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.81.0/std/primitive.reference.html">&amp;Control</a></h4></section></summary><div class="docblock"><p>Get control for player based on provided <code>ControlSource</code>.</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">ยง</a></h2><div id="implementors-list"><section id="impl-InputCollector%3C'a,+PlayerControlMapping,+ControlSource,+PlayerControl%3E-for-PlayerInputCollector" class="impl"><a class="src rightside" href="../../src/jumpy/input.rs.html#217-412">source</a><a href="#impl-InputCollector%3C'a,+PlayerControlMapping,+ControlSource,+PlayerControl%3E-for-PlayerInputCollector" class="anchor">ยง</a><h3 class="code-header">impl&lt;'a&gt; <a class="trait" href="trait.InputCollector.html" title="trait jumpy::prelude::InputCollector">InputCollector</a>&lt;'a, <a class="struct" href="../settings/struct.PlayerControlMapping.html" title="struct jumpy::settings::PlayerControlMapping">PlayerControlMapping</a>, <a class="enum" href="../input/enum.ControlSource.html" title="enum jumpy::input::ControlSource">ControlSource</a>, <a class="struct" href="../input/struct.PlayerControl.html" title="struct jumpy::input::PlayerControl">PlayerControl</a>&gt; for <a class="struct" href="../input/struct.PlayerInputCollector.html" title="struct jumpy::input::PlayerInputCollector">PlayerInputCollector</a></h3></section></div><script src="../../trait.impl/bones_framework/input/trait.InputCollector.js" async></script></section></div></main></body></html>